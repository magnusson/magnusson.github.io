{"data":{"site":{"siteMetadata":{"title":"Rickard Magnusson"}},"markdownRemark":{"html":"<p>I've been coding a rock paper scissor game and wanted to write a bit about the development of it.</p>\n<h2>Firebase</h2>\n<p>I decided to make a game to be able to make good use of the real-time database from <a href=\"https://firebase.google.com/\">Firebase</a>.\nIt was surprisingly easy to set up and use. Using the firebase package all I needed to do was entering my application keys with and I was up and running.</p>\n<pre><code class=\"language-js\">import * as firebase from 'firebase/app'\nimport 'firebase/database'\n\nconst firebaseApp = firebase.initializeApp({\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n})\n\nexport default firebaseApp\n</code></pre>\n<p>With the firebase connection set up all I had to do to get the data from the database is to set a up a ref to the data.\nThis creates an ref to the players object in a lobby with a <code>gameId</code>.</p>\n<pre><code class=\"language-js\">const playersRef = firebaseApp.database().ref(`${gameId}/players`)\n</code></pre>\n<p>With the ref available I use two functions <code>.once()</code> and <code>.on()</code>.\n<code>.once()</code> is used to fetch the data from the database if there already is someone in the lobby and updates it with the current players.\nUsing <code>.on()</code> works like a listener for changes on the reference. When a player joins the lobby we update the state and can start the game.</p>\n<p>I started using <a href=\"https://github.com/tylermcginnis/re-base\" target=\"_blank\" rel=\"noreferrer\">re-base</a> but decided against it because I wanted to try using only the Firebase API.\nUsing re-base you could simplify the code quite a bit using <a href=\"https://github.com/tylermcginnis/re-base#syncstateendpoint-options\" target=\"_blank\" rel=\"noreferrer\"><code>syncState</code></a>.\nThis is what I probably will use if I decide to refactor this some day.</p>\n<h2>React Hooks</h2>\n<p>Another reason for this project was to get used to using the somewhat new Hooks API.\nWhen I first started using Hooks I was really impressed with how much cleaned the code looks. I think this <a href=\"https://twitter.com/threepointone/status/1056594421079261185\">tweet</a> really shows how big of a difference it makes.\nThere are a few gotchas when moving away from the life cycle methods in classes and instead using <code>useEffect</code> to get the same effect.</p>\n<p>One thing I had issues with using hooks is that when I tried to write test using <a href=\"https://github.com/airbnb/enzyme\">enzyme</a> it does not yet have full support for it. So I've had to put that on hold until a later date.</p>\n<h2>Try it out</h2>\n<p>The game is currently hosted on Netlify which is also the first time I've used it and I really enjoy the simplicity of setting up a site in no time. I think it was about three click to get the site up and running from my GitHub repo.\nYou can try it out at <a href=\"https://klunsa.magnusson.dev/\">klunsa.magnusson.dev</a>. Just send the link to a friend or open it in a new tab to play against yourself.\nThere is still much to be done about the design feeling of the game but since it is in a working state I wanted to get it up and write down a bit about the process.</p>\n<p>The name Klunsa is a swedish slang for rock–paper–scissors.</p>","frontmatter":{"title":"Klunsa ✊✋✌"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/klunsa/"}}